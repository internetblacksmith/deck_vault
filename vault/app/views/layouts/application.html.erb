<!DOCTYPE html>
<html lang="en">
<head>
  <title><%= content_for(:title) || "Deck Vault" %></title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#111111">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <link rel="stylesheet" href="/assets/tailwind.css">
  <%= javascript_importmap_tags %>
  <style>
    * { box-sizing: border-box; }
    body { background:#111;color:#eee;min-height:100vh;font-family:system-ui,sans-serif;margin:0; }
    .app-nav { background:#1a1a1a;border-bottom:1px solid #333;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;gap:12px; }
    .app-nav-brand { color:#fff;text-decoration:none;font-weight:600;font-size:16px;white-space:nowrap; }
    .app-nav-user { display:flex;align-items:center;gap:12px; }
    .app-nav-username { color:#888;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:120px; }
    .app-nav-logout { background:#333;color:#eee;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:13px; }
    .app-nav-link { color:#888;text-decoration:none;font-size:14px;transition:color 0.2s; }
    .app-nav-link:hover { color:#fff; }
    .app-main { max-width:1200px;margin:0 auto;padding:16px; }
    @media (min-width: 600px) {
      .app-nav { padding:16px 24px; }
      .app-nav-brand { font-size:18px; }
      .app-nav-username { font-size:14px;max-width:none; }
      .app-nav-logout { font-size:14px; }
      .app-main { padding:24px; }
    }
  </style>
</head>
<body>

  <% if current_user %>
    <nav class="app-nav">
      <div style="display: flex; align-items: center; gap: 20px;">
        <a href="<%= card_sets_path %>" class="app-nav-brand">Deck Vault</a>
        <a href="<%= chat_path %>" class="app-nav-link">Chat</a>
      </div>
      <div class="app-nav-user">
        <span class="app-nav-username"><%= current_user.username %></span>
        <%= button_to "Logout", logout_path, method: :delete, class: "app-nav-logout" %>
      </div>
    </nav>
  <% end %>

  <main class="app-main">
    <%= yield %>
  </main>

  <%= render "shared/toast" %>
</body>
</html>
