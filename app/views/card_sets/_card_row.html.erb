<tr data-card-id="<%= card.id %>" 
    data-controller="card-update" 
    data-card-sort-target="item"
    data-sort-name="<%= card.name.downcase %>"
    data-sort-number="<%= sortable_collector_number(card.collector_number) %>"
    data-sort-rarity="<%= rarity_sort_value(card.rarity) %>"
    data-sort-color="<%= color_sort_value(card.mana_cost) %>"
    data-sort-mana="<%= mana_value(card.mana_cost) %>"
    data-sort-type="<%= card.type_line&.downcase || '' %>"
    style="border-bottom:1px solid #333;">
    <td style="padding:12px 16px;">
      <div style="color:#fff;font-weight:500;"><%= card.name %></div>
      <div style="color:#666;font-size:12px;"><%= formatted_collector_number(card.collector_number, card.card_set.code) %></div>
    </td>
    <td style="padding:12px 16px;color:#888;font-size:14px;"><%= card.type_line %></td>
    <td style="padding:12px 16px;">
      <% rarity_colors = { 'common' => '#888', 'uncommon' => '#6cf', 'rare' => '#fa0', 'mythic' => '#f64' } %>
      <span style="color:<%= rarity_colors[card.rarity] || '#888' %>;font-size:13px;"><%= card.rarity&.capitalize %></span>
    </td>
    <td style="padding:12px 16px;text-align:center;">
      <input type="number" min="0" 
             data-card-update-target="quantity" 
             data-card-id="<%= card.id %>"
             value="<%= card.collection_card&.quantity || 0 %>" 
             style="width:50px;background:#222;color:#eee;border:1px solid #444;padding:4px 8px;border-radius:3px;text-align:center;">
    </td>
    <td style="padding:12px 16px;text-align:center;">
      <input type="number" min="0" 
             data-card-update-target="foilQuantity" 
             data-card-id="<%= card.id %>"
             value="<%= card.collection_card&.foil_quantity || 0 %>" 
             style="width:50px;background:#222;color:#eee;border:1px solid #555;padding:4px 8px;border-radius:3px;text-align:center;background:linear-gradient(135deg, #2a2a3a 0%, #1a1a2a 100%);"
             title="Foil quantity">
    </td>
    <td style="padding:12px 16px;">
      <input type="text" 
             data-card-update-target="notes" 
             data-card-id="<%= card.id %>"
             value="<%= card.collection_card&.notes || '' %>" 
             placeholder="Notes..."
             style="width:100%;background:#222;color:#eee;border:1px solid #444;padding:4px 8px;border-radius:3px;">
    </td>
  </tr>
