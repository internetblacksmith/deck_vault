<% cache ["progress_bar", card_set, card_set.download_status, card_set.images_downloaded] do %>
  <% if card_set.downloading? || card_set.pending? %>
    <div class="bg-blue-50 rounded-lg border border-blue-200 p-4">
      <div class="flex items-center justify-between mb-3">
        <p class="font-semibold text-slate-900">
          <% if card_set.downloading? %>
            <span class="flex items-center gap-2">
              <span class="animate-spin">⚙️</span> Downloading Images...
            </span>
          <% else %>
            <span class="flex items-center gap-2">
              <span>⏳</span> Pending Download
            </span>
          <% end %>
        </p>
        <p class="text-sm text-slate-600"><%= card_set.images_downloaded %> / <%= card_set.card_count %> images</p>
      </div>
      <div class="w-full bg-slate-200 rounded-full h-2 overflow-hidden">
        <div class="h-full bg-blue-600 rounded-full transition-all duration-500" 
             style="width: <%= card_set.download_progress_percentage %>%; min-width: 2px;"
             id="progress-bar"></div>
      </div>
      <p class="text-xs text-slate-600 mt-2"><%= card_set.download_progress_percentage %>% complete</p>
    </div>
  <% elsif card_set.completed? %>
    <div class="bg-green-50 rounded-lg border border-green-200 p-4">
      <p class="text-green-700 font-semibold flex items-center gap-2">
        <span>✓</span> All images downloaded and ready
      </p>
    </div>
  <% end %>
<% end %>
